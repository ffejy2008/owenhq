---
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .filter((p) => !p.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Posts | OwenHQ</title>
  </head>
  <body style="max-width: 760px; margin: 40px auto; padding: 0 16px; font-family: system-ui;">
    <header style="margin-bottom: 24px;">
    <a href={import.meta.env.BASE_URL} style="text-decoration:none;">← Home</a>
      <h1 style="margin: 12px 0 0;">Posts</h1>
      <p style="margin: 8px 0 0; opacity: 0.8;">
        Field notes on building a walking-first fitness app — tested in the real world.
      </p>
    </header>

    <main>
      <ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:16px;">
        {posts.map((post) => (
          <li>
            <a href={`${import.meta.env.BASE_URL}blog/${post.slug}/`} style="font-size: 18px; font-weight: 600;">
              {post.data.title}
            </a>
            <div style="opacity:0.7; margin-top:4px;">
              {post.data.pubDate.toISOString().slice(0,10)}
              {post.data.description ? ` — ${post.data.description}` : ""}
            </div>
          </li>
        ))}
      </ul>
    </main>
  </body>
</html>
