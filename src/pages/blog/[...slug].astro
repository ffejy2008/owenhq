---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{post.data.title} | OwenHQ</title>
    {post.data.description && (
      <meta name="description" content={post.data.description} />
    )}
  </head>

  <body
    style="max-width: 760px; margin: 40px auto; padding: 0 16px; font-family: system-ui; line-height: 1.6;"
  >
    <header style="margin-bottom: 24px;">
      <!-- Go up one level to /blog/ -->
      <a href="../" style="text-decoration:none;">← Posts</a>

      <h1 style="margin: 12px 0 6px;">{post.data.title}</h1>

      <div style="opacity:0.7;">
        {post.data.pubDate.toISOString().slice(0, 10)}
      </div>

      {post.data.tags?.length ? (
        <div
          style="margin-top: 10px; display:flex; gap:8px; flex-wrap:wrap;"
        >
          {post.data.tags.map((t) => (
            <span
              style="font-size: 12px; padding: 3px 8px; border: 1px solid #ddd; border-radius: 999px; opacity:0.9;"
            >
              {t}
            </span>
          ))}
        </div>
      ) : null}
    </header>

    <main>
      <Content />
    </main>

    <footer style="margin-top: 40px; opacity: 0.7;">
      <p>OwenHQ — field notes on building and testing The Healthy Walker.</p>
    </footer>
  </body>
</html>
